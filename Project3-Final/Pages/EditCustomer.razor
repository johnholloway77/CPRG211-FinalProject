@page "/editCustomer"
@using Project3_Final.Services;
@using Project3_Final.Models;
@using Microsoft.AspNetCore.Components.Forms

@inject NavigationManager navHelper


<body>
<h3>EditCustomer</h3>


         <table class="table">
          <thead>
                <tr>
                <th>Field</th>
                <th>Value</th>
        </tr>
            </thead>
             <tbody>
        
        <tr>
            <td>First name</td>
            <td><input type="text" @bind="@customerToEdit.FirstName"/></td>
            
        </tr>
        <tr>
            <td>Last name</td>
                <td><input type="text" @bind="@customerToEdit.LastName"/></td>
        </tr>
        <tr>
            <td>Phone Number</td>
                <td><input type="text"  @bind="@customerToEdit.PhoneNumber" maxlength="10"/></td>
        </tr>
        <tr>
            <td>Email</td>
                <td><input type="email" @bind="@customerToEdit.Email" /></td>
        </tr>
        <tr>
            <td>Birthday</td>
                <td><input type="date" @bind="@customerToEdit.DateOfBirth"/></td>
        </tr>
        <tr>
            <td>Membership Type</td>
            <td>
                <InputSelect @bind-Value="@customerToEdit.MembershipType">
                    <option value="annual">Annual</option>
                    <option value="monthly">Monthly</option>
                    <option value="trial">30-Day - Trial</option>
                </InputSelect>
            </td>
        </tr>
        <tr>
            <td>Account Status</td>
                <td>
                <InputSelect @bind-Value="@customerToEdit.AccountStatus">
                    <option value=true>Active</option>
                    <option value=false>Inactive</option>
                </InputSelect>
                </td>
        </tr>

            <btn class="btn btn-primary" @onclick="updateCustomer">Update</btn>

    </tbody>
        </table>
 
</body>

@code {
    public static Customer? customerToEdit;



    void updateCustomer()
    {        

        Services.CustomerServices.UpdateRecord(customerToEdit.CustID, customerToEdit.FirstName, customerToEdit.LastName, customerToEdit.PhoneNumber, customerToEdit.Email, customerToEdit.DateOfBirth, customerToEdit.MembershipType, customerToEdit.AccountStatus);

        Application.Current.MainPage.DisplayAlert("Note:", $"UpdateRecord() request sent for {customerToEdit.FirstName} {customerToEdit.LastName}", "Okay");

        navHelper.NavigateTo("customer");
    }
}

